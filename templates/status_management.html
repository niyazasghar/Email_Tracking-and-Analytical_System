<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Status Management [Futuristic]</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="/static/css/style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400..900&family=Roboto:wght@300;400;700&display=swap"
    rel="stylesheet"
  />
</head>
<body class="dark-theme">
  <div class="container my-5">

    <!-- Back to Superuser Dashboard -->
    <div class="mb-4">
      <button
        class="btn btn-secondary btn-futuristic"
        onclick="window.location.href='/superuser-dashboard'">
        ← Back to Dashboard
      </button>
    </div>

    <h2 class="form-heading mb-5">Status Management Module</h2>

    <!-- MANUAL STATUS UPDATE CARD -->
    <div class="row mb-5">
      <div class="col-md-12">
        <div class="futuristic-card p-4">
          <div class="card-header">
            <h5>Manual Status Update</h5>
          </div>
          <div class="card-body">
            <form id="statusUpdateForm" class="needs-validation" novalidate>
              <div class="row g-3">
                <!-- Choose Company -->
                <div class="col-md-6">
                  <label for="companyDropdown" class="form-label">Select Company</label>
                  <select
                    id="companyDropdown"
                    class="form-select"
                    required
                  >
                    <option value="" selected disabled>Select a Company...</option>
                  </select>
                  <div class="invalid-feedback">
                    Please select a company.
                  </div>
                </div>
                <!-- Choose Email (Subject+Status) -->
                <div class="col-md-6">
                  <label for="emailDropdown" class="form-label">Select Email by Subject</label>
                  <select
                    id="emailDropdown"
                    class="form-select"
                    required
                  >
                    <option value="" selected disabled>Select an Email...</option>
                  </select>
                  <div class="invalid-feedback">
                    Please select an email.
                  </div>
                </div>
              </div>

              <!-- New Status (Optional) -->
              <div class="row mt-3">
                <div class="col-md-12">
                  <label for="newStatusInput" class="form-label">New Status (Optional)</label>
                  <input
                    type="text"
                    class="form-control"
                    id="newStatusInput"
                    placeholder="e.g. 'Follow-up Required' or leave blank"
                  />
                </div>
              </div>

              <button type="submit" class="btn btn-primary btn-futuristic mt-4">
                <span class="btn-text">Update Status</span>
                <span class="btn-icon">✓</span>
              </button>
            </form>
            <div class="mt-3" id="updateMessage"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- COMPANY STATUS OVERVIEW CARD -->
    <div class="row">
      <div class="col-md-12">
        <div class="futuristic-card p-4">
          <div class="card-header">
            <h5>Company Status Overview</h5>
          </div>
          <div class="card-body">
            <form id="companyStatusForm" class="row g-3 needs-validation" novalidate>
              <!-- Company ID as a dropdown instead of numeric input -->
              <div class="col-md-4">
                <label for="companyStatusDropdown" class="form-label">Select Company</label>
                <select
                  id="companyStatusDropdown"
                  class="form-select"
                  required
                >
                  <option value="" selected disabled>Select a Company...</option>
                </select>
                <div class="invalid-feedback">
                  Please select a company to check status.
                </div>
              </div>
              <!-- Start Date (Optional) -->
              <div class="col-md-4">
                <label for="startDateInput" class="form-label">Start Date (Optional)</label>
                <input type="date" class="form-control" id="startDateInput" />
              </div>
              <!-- End Date (Optional) -->
              <div class="col-md-4">
                <label for="endDateInput" class="form-label">End Date (Optional)</label>
                <input type="date" class="form-control" id="endDateInput" />
              </div>
              <div class="col-md-12">
                <button type="submit" class="btn btn-primary btn-futuristic mt-4">
                  <span class="btn-text">Check Status</span>
                  <span class="btn-icon">→</span>
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- RESULT CARDS -->
    <div class="row g-4 mt-4">
      <div class="col-md-6">
        <div class="stat-card futuristic-card h-100">
          <div class="stat-card-body">
            <h5 class="stat-card-title">Pending Emails</h5>
            <p class="stat-card-value" id="pendingCount">--</p>
            <div class="stat-card-icon">⏳</div>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="stat-card futuristic-card h-100">
          <div class="stat-card-body">
            <h5 class="stat-card-title">Follow-up Required</h5>
            <p class="stat-card-value" id="followUpCount">--</p>
            <div class="stat-card-icon">⚠️</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Link to JS -->
  <script src="/static/js/status_management.js"></script>

  <!-- Basic Bootstrap form validation -->
  <script>
    (() => {
      'use strict';
      const forms = document.querySelectorAll('.needs-validation');
      Array.from(forms).forEach(form => {
        form.addEventListener('submit', event => {
          if (!form.checkValidity()) {
            event.preventDefault();
            event.stopPropagation();
          }
          form.classList.add('was-validated');
        }, false);
      });
    })();
  </script>
</body>
</html>
